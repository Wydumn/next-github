{"ast":null,"code":"import React from \"react\";\nvar __jsx = React.createElement;\n\nconst api = require('../lib/api');\n\nfunction Index({\n  userRepos,\n  userStarredRepos,\n  isLogin\n}) {\n  console.log(userRepos, userStarredRepos, isLogin);\n\n  if (!isLogin) {\n    return __jsx(\"div\", {\n      className: \"root\"\n    }, __jsx(\"p\", null, \"nin'hai\"));\n  }\n\n  return __jsx(\"span\", null, \"Index\");\n}\n\nIndex.getInitialProps = async ({\n  ctx,\n  reduxStore\n}) => {\n  // const result = await axios\n  //     .get('/github/search/repositories?q=react')\n  //     .then(res => console.log(res))\n  const user = reduxStore.getState().user;\n\n  if (!user || !user.id) {\n    return {\n      isLogin: false\n    };\n  } // 获取仓库\n\n\n  const userRepos = await api.request({\n    url: '/user/repos'\n  }, ctx.req, ctx.res); // 获取认证用户Star的仓库\n\n  const userStarredRepos = await api.request({\n    url: '/user/starred'\n  }, ctx.req, ctx.res);\n  return {\n    isLogin: true,\n    userRepos: userRepos.data,\n    userStarredRepos: userStarredRepos.data\n  };\n};\n\nexport default Index;","map":{"version":3,"sources":["D:/Project/interview/blog/pages/index.js"],"names":["api","require","Index","userRepos","userStarredRepos","isLogin","console","log","getInitialProps","ctx","reduxStore","user","getState","id","request","url","req","res","data"],"mappings":";;;AAEA,MAAMA,GAAG,GAAGC,OAAO,CAAC,YAAD,CAAnB;;AAEA,SAASC,KAAT,CAAgB;AAAEC,EAAAA,SAAF;AAAaC,EAAAA,gBAAb;AAA+BC,EAAAA;AAA/B,CAAhB,EAA0D;AACtDC,EAAAA,OAAO,CAACC,GAAR,CAAYJ,SAAZ,EAAuBC,gBAAvB,EAAyCC,OAAzC;;AAEA,MAAI,CAACA,OAAL,EAAc;AACV,WACI;AAAK,MAAA,SAAS,EAAC;AAAf,OACI,2BADJ,CADJ;AAKH;;AAED,SAAO,4BAAP;AACH;;AAEDH,KAAK,CAACM,eAAN,GAAwB,OAAO;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAP,KAA+B;AACnD;AACA;AACA;AAEA,QAAMC,IAAI,GAAGD,UAAU,CAACE,QAAX,GAAsBD,IAAnC;;AACA,MAAI,CAACA,IAAD,IAAS,CAACA,IAAI,CAACE,EAAnB,EAAuB;AACnB,WAAO;AACHR,MAAAA,OAAO,EAAE;AADN,KAAP;AAGH,GAVkD,CAanD;;;AACA,QAAMF,SAAS,GAAG,MAAMH,GAAG,CAACc,OAAJ,CAAY;AAChCC,IAAAA,GAAG,EAAE;AAD2B,GAAZ,EAErBN,GAAG,CAACO,GAFiB,EAEZP,GAAG,CAACQ,GAFQ,CAAxB,CAdmD,CAkBnD;;AACA,QAAMb,gBAAgB,GAAG,MAAMJ,GAAG,CAACc,OAAJ,CAAY;AACvCC,IAAAA,GAAG,EAAE;AADkC,GAAZ,EAE5BN,GAAG,CAACO,GAFwB,EAEnBP,GAAG,CAACQ,GAFe,CAA/B;AAIA,SAAO;AACHZ,IAAAA,OAAO,EAAE,IADN;AAEHF,IAAAA,SAAS,EAAEA,SAAS,CAACe,IAFlB;AAGHd,IAAAA,gBAAgB,EAAEA,gBAAgB,CAACc;AAHhC,GAAP;AAKH,CA5BD;;AA8BA,eAAehB,KAAf","sourcesContent":["\r\n\r\nconst api = require('../lib/api')\r\n\r\nfunction Index ({ userRepos, userStarredRepos, isLogin }) {\r\n    console.log(userRepos, userStarredRepos, isLogin)\r\n\r\n    if (!isLogin) {\r\n        return (\r\n            <div className='root'>\r\n                <p>nin'hai</p>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return <span>Index</span>\r\n}\r\n\r\nIndex.getInitialProps = async ({ ctx, reduxStore }) => {\r\n    // const result = await axios\r\n    //     .get('/github/search/repositories?q=react')\r\n    //     .then(res => console.log(res))\r\n\r\n    const user = reduxStore.getState().user\r\n    if (!user || !user.id) {\r\n        return {\r\n            isLogin: false\r\n        }\r\n    }\r\n\r\n\r\n    // 获取仓库\r\n    const userRepos = await api.request({\r\n        url: '/user/repos'\r\n    }, ctx.req, ctx.res)\r\n\r\n    // 获取认证用户Star的仓库\r\n    const userStarredRepos = await api.request({\r\n        url: '/user/starred'\r\n    }, ctx.req, ctx.res)\r\n\r\n    return {\r\n        isLogin: true,\r\n        userRepos: userRepos.data,\r\n        userStarredRepos: userStarredRepos.data\r\n    }\r\n}\r\n\r\nexport default Index"]},"metadata":{},"sourceType":"module"}