{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Button from \"antd/lib/button\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport getConfig from 'next/config';\nimport { connect } from 'reat';\n\nvar api = require('../lib/api');\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nfunction Index(_ref) {\n  var userRepos = _ref.userRepos,\n      userStarredRepos = _ref.userStarredRepos;\n  console.log(userRepos, userStarredRepos);\n\n  if (!isLogin) {\n    return __jsx(\"div\", {\n      className: \"jsx-2321875535\" + \" \" + 'root'\n    }, __jsx(\"p\", {\n      className: \"jsx-2321875535\"\n    }, \"\\u60A8\\u8FD8\\u6CA1\\u6709\\u767B\\u5F55\"), __jsx(_Button, {\n      type: \"primary\",\n      href: publicRuntimeConfig.OAUTH_URL\n    }, \"\\u70B9\\u51FB\\u767B\\u5F55\"), __jsx(_JSXStyle, {\n      id: \"2321875535\"\n    }, \".root.jsx-2321875535{height:400px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0XFxpbnRlcnZpZXdcXGJsb2dcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFrQjRCLEFBR3NDLGFBQ0EsMEVBQ1MsOEVBQ0MsbUdBQ0osNkZBQ3ZCIiwiZmlsZSI6IkQ6XFxQcm9qZWN0XFxpbnRlcnZpZXdcXGJsb2dcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEJ1dHRvbiB9IGZyb20gJ2FudGQnXHJcbmltcG9ydCBnZXRDb25maWcgZnJvbSAnbmV4dC9jb25maWcnXHJcbmltcG9ydCB7IGNvbm5lY3QgfSBmcm9tICdyZWF0J1xyXG5cclxuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vbGliL2FwaScpXHJcblxyXG5jb25zdCB7IHB1YmxpY1J1bnRpbWVDb25maWcgfSA9IGdldENvbmZpZygpXHJcblxyXG5mdW5jdGlvbiBJbmRleCAoeyB1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3MgfSkge1xyXG4gICAgY29uc29sZS5sb2codXNlclJlcG9zLCB1c2VyU3RhcnJlZFJlcG9zKVxyXG5cclxuICAgIGlmICghaXNMb2dpbikge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICAgICAgICAgIDxwPuaCqOi/mOayoeacieeZu+W9lTwvcD5cclxuICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cInByaW1hcnlcIiBocmVmPXtwdWJsaWNSdW50aW1lQ29uZmlnLk9BVVRIX1VSTH0+XHJcbiAgICAgICAgICAgICAgICAgICAg54K55Ye755m75b2VXHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDAwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gPHNwYW4+SW5kZXg8L3NwYW4+XHJcbn1cclxuXHJcbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICAvLyBjb25zdCByZXN1bHQgPSBhd2FpdCBheGlvc1xyXG4gICAgLy8gICAgIC5nZXQoJy9naXRodWIvc2VhcmNoL3JlcG9zaXRvcmllcz9xPXJlYWN0JylcclxuICAgIC8vICAgICAudGhlbihyZXMgPT4gY29uc29sZS5sb2cocmVzKSlcclxuXHJcbiAgICBjb25zdCB1c2VyID0gcmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnVzZXJcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzTG9naW46IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvLyDojrflj5bku5PlupNcclxuICAgIGNvbnN0IHVzZXJSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KHtcclxuICAgICAgICB1cmw6ICcvdXNlci9yZXBvcydcclxuICAgIH0sIGN0eC5yZXEsIGN0eC5yZXMpXHJcblxyXG4gICAgLy8g6I635Y+W6K6k6K+B55So5oi3U3RhcueahOS7k+W6k1xyXG4gICAgY29uc3QgdXNlclN0YXJyZWRSZXBvcyA9IGF3YWl0IGFwaS5yZXF1ZXN0KHtcclxuICAgICAgICB1cmw6ICcvdXNlci9zdGFycmVkJ1xyXG4gICAgfSwgY3R4LnJlcSwgY3R4LnJlcylcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGlzTG9naW46IHRydWUsXHJcbiAgICAgICAgdXNlclJlcG9zOiB1c2VyUmVwb3MuZGF0YSxcclxuICAgICAgICB1c2VyU3RhcnJlZFJlcG9zOiB1c2VyU3RhcnJlZFJlcG9zLmRhdGFcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgSW5kZXgiXX0= */\\n/*@ sourceURL=D:\\\\\\\\Project\\\\\\\\interview\\\\\\\\blog\\\\\\\\pages\\\\\\\\index.js */\"));\n  }\n\n  return __jsx(\"span\", null, \"Index\");\n}\n\nIndex.getInitialProps = function _callee(_ref2) {\n  var ctx, reduxStore, user, userRepos, userStarredRepos;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref2.ctx, reduxStore = _ref2.reduxStore;\n          // const result = await axios\n          //     .get('/github/search/repositories?q=react')\n          //     .then(res => console.log(res))\n          user = reduxStore.getState().user;\n\n          if (!(!user || !user.id)) {\n            _context.next = 4;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            isLogin: false\n          });\n\n        case 4:\n          _context.next = 6;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/repos'\n          }, ctx.req, ctx.res));\n\n        case 6:\n          userRepos = _context.sent;\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/starred'\n          }, ctx.req, ctx.res));\n\n        case 9:\n          userStarredRepos = _context.sent;\n          return _context.abrupt(\"return\", {\n            isLogin: true,\n            userRepos: userRepos.data,\n            userStarredRepos: userStarredRepos.data\n          });\n\n        case 11:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default Index;","map":{"version":3,"sources":["D:/Project/interview/blog/pages/index.js"],"names":["getConfig","connect","api","require","publicRuntimeConfig","Index","userRepos","userStarredRepos","console","log","isLogin","OAUTH_URL","getInitialProps","ctx","reduxStore","user","getState","id","request","url","req","res","data"],"mappings":";;;;;AACA,OAAOA,SAAP,MAAsB,aAAtB;AACA,SAASC,OAAT,QAAwB,MAAxB;;AAEA,IAAMC,GAAG,GAAGC,OAAO,CAAC,YAAD,CAAnB;;iBAEgCH,SAAS,E;IAAjCI,mB,cAAAA,mB;;AAER,SAASC,KAAT,OAAiD;AAAA,MAA/BC,SAA+B,QAA/BA,SAA+B;AAAA,MAApBC,gBAAoB,QAApBA,gBAAoB;AAC7CC,EAAAA,OAAO,CAACC,GAAR,CAAYH,SAAZ,EAAuBC,gBAAvB;;AAEA,MAAI,CAACG,OAAL,EAAc;AACV,WACI;AAAA,0CAAe;AAAf,OACI;AAAA;AAAA,8CADJ,EAEI;AAAQ,MAAA,IAAI,EAAC,SAAb;AAAuB,MAAA,IAAI,EAAEN,mBAAmB,CAACO;AAAjD,kCAFJ;AAAA;AAAA,ytGADJ;AAiBH;;AAED,SAAO,4BAAP;AACH;;AAEDN,KAAK,CAACO,eAAN,GAAwB;AAAA;AAAA;AAAA;AAAA;AAAA;AAASC,UAAAA,GAAT,SAASA,GAAT,EAAcC,UAAd,SAAcA,UAAd;AACpB;AACA;AACA;AAEMC,UAAAA,IALc,GAKPD,UAAU,CAACE,QAAX,GAAsBD,IALf;;AAAA,gBAMhB,CAACA,IAAD,IAAS,CAACA,IAAI,CAACE,EANC;AAAA;AAAA;AAAA;;AAAA,2CAOT;AACHP,YAAAA,OAAO,EAAE;AADN,WAPS;;AAAA;AAAA;AAAA,2CAcIR,GAAG,CAACgB,OAAJ,CAAY;AAChCC,YAAAA,GAAG,EAAE;AAD2B,WAAZ,EAErBN,GAAG,CAACO,GAFiB,EAEZP,GAAG,CAACQ,GAFQ,CAdJ;;AAAA;AAcdf,UAAAA,SAdc;AAAA;AAAA,2CAmBWJ,GAAG,CAACgB,OAAJ,CAAY;AACvCC,YAAAA,GAAG,EAAE;AADkC,WAAZ,EAE5BN,GAAG,CAACO,GAFwB,EAEnBP,GAAG,CAACQ,GAFe,CAnBX;;AAAA;AAmBdd,UAAAA,gBAnBc;AAAA,2CAuBb;AACHG,YAAAA,OAAO,EAAE,IADN;AAEHJ,YAAAA,SAAS,EAAEA,SAAS,CAACgB,IAFlB;AAGHf,YAAAA,gBAAgB,EAAEA,gBAAgB,CAACe;AAHhC,WAvBa;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAxB;;AA8BA,eAAejB,KAAf","sourcesContent":["import { Button } from 'antd'\r\nimport getConfig from 'next/config'\r\nimport { connect } from 'reat'\r\n\r\nconst api = require('../lib/api')\r\n\r\nconst { publicRuntimeConfig } = getConfig()\r\n\r\nfunction Index ({ userRepos, userStarredRepos }) {\r\n    console.log(userRepos, userStarredRepos)\r\n\r\n    if (!isLogin) {\r\n        return (\r\n            <div className='root'>\r\n                <p>您还没有登录</p>\r\n                <Button type=\"primary\" href={publicRuntimeConfig.OAUTH_URL}>\r\n                    点击登录\r\n                </Button>\r\n                <style jsx>{`\r\n                    .root {\r\n                        height: 400px;\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        justify-content: center;\r\n                        align-items: center;\r\n                    }    \r\n                `}</style>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return <span>Index</span>\r\n}\r\n\r\nIndex.getInitialProps = async ({ ctx, reduxStore }) => {\r\n    // const result = await axios\r\n    //     .get('/github/search/repositories?q=react')\r\n    //     .then(res => console.log(res))\r\n\r\n    const user = reduxStore.getState().user\r\n    if (!user || !user.id) {\r\n        return {\r\n            isLogin: false\r\n        }\r\n    }\r\n\r\n\r\n    // 获取仓库\r\n    const userRepos = await api.request({\r\n        url: '/user/repos'\r\n    }, ctx.req, ctx.res)\r\n\r\n    // 获取认证用户Star的仓库\r\n    const userStarredRepos = await api.request({\r\n        url: '/user/starred'\r\n    }, ctx.req, ctx.res)\r\n\r\n    return {\r\n        isLogin: true,\r\n        userRepos: userRepos.data,\r\n        userStarredRepos: userStarredRepos.data\r\n    }\r\n}\r\n\r\nexport default Index"]},"metadata":{},"sourceType":"module"}