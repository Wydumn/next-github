{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _Tabs from \"antd/lib/tabs\";\nimport _Icon from \"antd/lib/icon\";\nimport _Button from \"antd/lib/button\";\nimport _JSXStyle from \"styled-jsx/style\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useEffect } from 'react';\nimport getConfig from 'next/config';\nimport { connect } from 'react-redux';\nimport Router, { withRouter } from 'next/router';\nimport LRU from 'lru-cache';\nimport Repo from '../components/Repo';\nvar cache = new LRU({\n  maxAge: 1000 * 60 * 10\n});\n\nvar api = require('../lib/api');\n\nvar _getConfig = getConfig(),\n    publicRuntimeConfig = _getConfig.publicRuntimeConfig;\n\nvar cachedUserRepos, cachedUserStarredRepos;\nvar isServer = false;\n\nfunction Index(_ref) {\n  var userRepos = _ref.userRepos,\n      userStarredRepos = _ref.userStarredRepos,\n      user = _ref.user,\n      router = _ref.router;\n  // console.log(userRepos, userStarredRepos)\n  var tabKey = router.query.key || '1';\n\n  var handleTabChange = function handleTabChange(activeKey) {\n    Router.push(\"/?key=\".concat(activeKey));\n  };\n\n  useEffect(function () {\n    if (!isServer) {\n      // cachedUserRepos = userRepos.data\n      // cachedUserStarredRepos = userStarredRepos.data\n      if (userRepos) {}\n\n      cache.set('userRepos', userRepos);\n      cache.set('userStarredRepos', userStarredRepos);\n    }\n  }, [userRepos, userStarredRepos]);\n\n  if (!user || !user.id) {\n    return __jsx(\"div\", {\n      className: \"jsx-2321875535\" + \" \" + 'root'\n    }, __jsx(\"p\", {\n      className: \"jsx-2321875535\"\n    }, \"\\u60A8\\u8FD8\\u6CA1\\u6709\\u767B\\u5F55\"), __jsx(_Button, {\n      type: \"primary\",\n      href: publicRuntimeConfig.OAUTH_URL\n    }, \"\\u70B9\\u51FB\\u767B\\u5F55\"), __jsx(_JSXStyle, {\n      id: \"2321875535\"\n    }, \".root.jsx-2321875535{height:400px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0XFxpbnRlcnZpZXdcXGJsb2dcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpRDRCLEFBR3NDLGFBQ0EsMEVBQ1MsOEVBQ0MsbUdBQ0osNkZBQ3ZCIiwiZmlsZSI6IkQ6XFxQcm9qZWN0XFxpbnRlcnZpZXdcXGJsb2dcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIFRhYnMgfSBmcm9tICdhbnRkJ1xyXG5pbXBvcnQgZ2V0Q29uZmlnIGZyb20gJ25leHQvY29uZmlnJ1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCBSb3V0ZXIsIHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xyXG5pbXBvcnQgTFJVICBmcm9tICdscnUtY2FjaGUnXHJcblxyXG5pbXBvcnQgUmVwbyBmcm9tICcuLi9jb21wb25lbnRzL1JlcG8nXHJcblxyXG5jb25zdCBjYWNoZSA9IG5ldyBMUlUoe1xyXG4gICAgbWF4QWdlOiAxMDAwICogNjAgKiAxMFxyXG59KVxyXG5cclxuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vbGliL2FwaScpXHJcblxyXG5jb25zdCB7IHB1YmxpY1J1bnRpbWVDb25maWcgfSA9IGdldENvbmZpZygpXHJcblxyXG5sZXQgY2FjaGVkVXNlclJlcG9zLCBjYWNoZWRVc2VyU3RhcnJlZFJlcG9zXHJcblxyXG5jb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXHJcblxyXG5mdW5jdGlvbiBJbmRleCAoeyB1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3MsIHVzZXIsIHJvdXRlcn0pIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKHVzZXJSZXBvcywgdXNlclN0YXJyZWRSZXBvcylcclxuXHJcbiAgICBjb25zdCB0YWJLZXkgPSByb3V0ZXIucXVlcnkua2V5IHx8ICcxJyBcclxuXHJcbiAgICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSAoYWN0aXZlS2V5KSA9PiB7XHJcbiAgICAgICAgUm91dGVyLnB1c2goYC8/a2V5PSR7YWN0aXZlS2V5fWApXHJcbiAgICB9XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIWlzU2VydmVyKSB7ICAgIFxyXG4gICAgICAgICAgICAvLyBjYWNoZWRVc2VyUmVwb3MgPSB1c2VyUmVwb3MuZGF0YVxyXG4gICAgICAgICAgICAvLyBjYWNoZWRVc2VyU3RhcnJlZFJlcG9zID0gdXNlclN0YXJyZWRSZXBvcy5kYXRhXHJcbiAgICAgICAgICAgIGlmICh1c2VyUmVwb3MpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhY2hlLnNldCgndXNlclJlcG9zJywgdXNlclJlcG9zKVxyXG4gICAgICAgICAgICBjYWNoZS5zZXQoJ3VzZXJTdGFycmVkUmVwb3MnLCB1c2VyU3RhcnJlZFJlcG9zKVxyXG4gICAgICAgIH1cclxuICAgIH0sIFt1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3NdKVxyXG5cclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICAgICAgICAgIDxwPuaCqOi/mOayoeacieeZu+W9lTwvcD5cclxuICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cInByaW1hcnlcIiBocmVmPXtwdWJsaWNSdW50aW1lQ29uZmlnLk9BVVRIX1VSTH0+XHJcbiAgICAgICAgICAgICAgICAgICAg54K55Ye755m75b2VXHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDAwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItaW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9e3VzZXIuYXZhdGFyX3VybH0gYWx0PVwidXNlciBhdmF0YXJcIiBjbGFzc05hbWU9XCJhdmF0YXJcIiAvPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibG9naW5cIj57dXNlci5sb2dpbn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1lXCI+e3VzZXIubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJiaW9cIj57dXNlci5iaW99PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZW1haWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwibWFpbFwiIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAxMCB9fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHt1c2VyLmVtYWlsfWB9Pnt1c2VyLmVtYWlsfTwvYT5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1yZXBvc1wiPlxyXG4gICAgICAgICAgICAgICAgPFRhYnMgYWN0aXZlS2V5PXt0YWJLZXl9IG9uQ2hhbmdlPXtoYW5kbGVUYWJDaGFuZ2V9IGFuaW1hdGVkPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDnmoTku5PlupNcIiBrZXk9XCIxXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyUmVwb3MubWFwKHJlcG8gPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lIHRhYj1cIuS9oOWFs+azqOeahOS7k+W6k1wiIGtleT1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXJTdGFycmVkUmVwb3MubWFwKHJlcG8gPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgIC5yb290IHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMDtcclxuICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgICAgICAudXNlci1pbmZvIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5sb2dpbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDgwMDtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM3Nzc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAuYmlvIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmF2YXRhciB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OyAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAudXNlci1yZXBvcyB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxleC1ncm93OiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbn1cclxuXHJcbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gcmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnVzZXJcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzTG9naW46IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNTZXJ2ZXIpIHtcclxuICAgICAgICBpZiAoY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSAmJiBjYWNoZS5nZXQoJ3VzZXJTdGFycmVkUmVwb3MnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXNlclJlcG9zOiBjYWNoZS5nZXQoJ3VzZXJSZXBvcycpLFxyXG4gICAgICAgICAgICAgICAgdXNlclN0YXJyZWRSZXBvczogY2FjaGUuZ2V0KCd1c2VyU3RhcnJlZFJlcG9zJyksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6I635Y+W5LuT5bqTXHJcbiAgICBjb25zdCB1c2VyUmVwb3MgPSBhd2FpdCBhcGkucmVxdWVzdCh7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvcmVwb3MnXHJcbiAgICB9LCBjdHgucmVxLCBjdHgucmVzKVxyXG5cclxuICAgIC8vIOiOt+WPluiupOivgeeUqOaIt1N0YXLnmoTku5PlupNcclxuICAgIGNvbnN0IHVzZXJTdGFycmVkUmVwb3MgPSBhd2FpdCBhcGkucmVxdWVzdCh7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvc3RhcnJlZCdcclxuICAgIH0sIGN0eC5yZXEsIGN0eC5yZXMpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpc0xvZ2luOiB0cnVlLFxyXG4gICAgICAgIHVzZXJSZXBvczogdXNlclJlcG9zLmRhdGEsXHJcbiAgICAgICAgdXNlclN0YXJyZWRSZXBvczogdXNlclN0YXJyZWRSZXBvcy5kYXRhXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoY29ubmVjdChmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdXNlcjogc3RhdGUudXNlcixcclxuICAgIH1cclxufSkoSW5kZXgpKSJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\Project\\\\\\\\interview\\\\\\\\blog\\\\\\\\pages\\\\\\\\index.js */\"));\n  }\n\n  return __jsx(\"div\", {\n    className: \"jsx-2375105089\" + \" \" + \"root\"\n  }, __jsx(\"div\", {\n    className: \"jsx-2375105089\" + \" \" + \"user-info\"\n  }, __jsx(\"img\", {\n    src: user.avatar_url,\n    alt: \"user avatar\",\n    className: \"jsx-2375105089\" + \" \" + \"avatar\"\n  }), __jsx(\"span\", {\n    className: \"jsx-2375105089\" + \" \" + \"login\"\n  }, user.login), __jsx(\"span\", {\n    className: \"jsx-2375105089\" + \" \" + \"name\"\n  }, user.name), __jsx(\"span\", {\n    className: \"jsx-2375105089\" + \" \" + \"bio\"\n  }, user.bio), __jsx(\"p\", {\n    className: \"jsx-2375105089\" + \" \" + \"email\"\n  }, __jsx(_Icon, {\n    type: \"mail\",\n    style: {\n      marginRight: 10\n    }\n  }), __jsx(\"a\", {\n    href: \"mailto:\".concat(user.email),\n    className: \"jsx-2375105089\"\n  }, user.email))), __jsx(\"div\", {\n    className: \"jsx-2375105089\" + \" \" + \"user-repos\"\n  }, __jsx(_Tabs, {\n    activeKey: tabKey,\n    onChange: handleTabChange,\n    animated: false\n  }, __jsx(_Tabs.TabPane, {\n    tab: \"\\u4F60\\u7684\\u4ED3\\u5E93\",\n    key: \"1\"\n  }, userRepos.map(function (repo) {\n    return __jsx(Repo, {\n      key: repo.id,\n      repo: repo\n    });\n  })), __jsx(_Tabs.TabPane, {\n    tab: \"\\u4F60\\u5173\\u6CE8\\u7684\\u4ED3\\u5E93\",\n    key: \"2\"\n  }, userStarredRepos.map(function (repo) {\n    return __jsx(Repo, {\n      key: repo.id,\n      repo: repo\n    });\n  })))), __jsx(_JSXStyle, {\n    id: \"2375105089\"\n  }, \".root.jsx-2375105089{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:20px 0;}.user-info.jsx-2375105089{width:200px;margin-right:40px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.login.jsx-2375105089{font-weight:800;font-size:20px;margin-top:20px;}.name.jsx-2375105089{font-size:16px;color:#777;}.bio.jsx-2375105089{margin-top:20px;color:#333;}.avatar.jsx-2375105089{width:100%;border-radius:5px;}.user-repos.jsx-2375105089{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxQcm9qZWN0XFxpbnRlcnZpZXdcXGJsb2dcXHBhZ2VzXFxpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF3RndCLEFBR2tDLEFBS0QsQUFPSSxBQUtELEFBSUMsQUFJTCxBQUlDLFdBSE0sQ0FwQkEsR0FZUCxDQUxJLEFBU0osVUFIZixDQUlBLEVBSUEsQ0FwQmtCLENBT0UsZ0JBQ3BCLHdCQWVBLEdBN0IyQixZQU9WLDBFQUNTLHVCQVBQLGVBQ25CLHdDQU9BIiwiZmlsZSI6IkQ6XFxQcm9qZWN0XFxpbnRlcnZpZXdcXGJsb2dcXHBhZ2VzXFxpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBCdXR0b24sIEljb24sIFRhYnMgfSBmcm9tICdhbnRkJ1xyXG5pbXBvcnQgZ2V0Q29uZmlnIGZyb20gJ25leHQvY29uZmlnJ1xyXG5pbXBvcnQgeyBjb25uZWN0IH0gZnJvbSAncmVhY3QtcmVkdXgnXHJcbmltcG9ydCBSb3V0ZXIsIHsgd2l0aFJvdXRlciB9IGZyb20gJ25leHQvcm91dGVyJ1xyXG5pbXBvcnQgTFJVICBmcm9tICdscnUtY2FjaGUnXHJcblxyXG5pbXBvcnQgUmVwbyBmcm9tICcuLi9jb21wb25lbnRzL1JlcG8nXHJcblxyXG5jb25zdCBjYWNoZSA9IG5ldyBMUlUoe1xyXG4gICAgbWF4QWdlOiAxMDAwICogNjAgKiAxMFxyXG59KVxyXG5cclxuY29uc3QgYXBpID0gcmVxdWlyZSgnLi4vbGliL2FwaScpXHJcblxyXG5jb25zdCB7IHB1YmxpY1J1bnRpbWVDb25maWcgfSA9IGdldENvbmZpZygpXHJcblxyXG5sZXQgY2FjaGVkVXNlclJlcG9zLCBjYWNoZWRVc2VyU3RhcnJlZFJlcG9zXHJcblxyXG5jb25zdCBpc1NlcnZlciA9IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnXHJcblxyXG5mdW5jdGlvbiBJbmRleCAoeyB1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3MsIHVzZXIsIHJvdXRlcn0pIHtcclxuICAgIC8vIGNvbnNvbGUubG9nKHVzZXJSZXBvcywgdXNlclN0YXJyZWRSZXBvcylcclxuXHJcbiAgICBjb25zdCB0YWJLZXkgPSByb3V0ZXIucXVlcnkua2V5IHx8ICcxJyBcclxuXHJcbiAgICBjb25zdCBoYW5kbGVUYWJDaGFuZ2UgPSAoYWN0aXZlS2V5KSA9PiB7XHJcbiAgICAgICAgUm91dGVyLnB1c2goYC8/a2V5PSR7YWN0aXZlS2V5fWApXHJcbiAgICB9XHJcblxyXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgICAgICBpZiAoIWlzU2VydmVyKSB7ICAgIFxyXG4gICAgICAgICAgICAvLyBjYWNoZWRVc2VyUmVwb3MgPSB1c2VyUmVwb3MuZGF0YVxyXG4gICAgICAgICAgICAvLyBjYWNoZWRVc2VyU3RhcnJlZFJlcG9zID0gdXNlclN0YXJyZWRSZXBvcy5kYXRhXHJcbiAgICAgICAgICAgIGlmICh1c2VyUmVwb3MpIHtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhY2hlLnNldCgndXNlclJlcG9zJywgdXNlclJlcG9zKVxyXG4gICAgICAgICAgICBjYWNoZS5zZXQoJ3VzZXJTdGFycmVkUmVwb3MnLCB1c2VyU3RhcnJlZFJlcG9zKVxyXG4gICAgICAgIH1cclxuICAgIH0sIFt1c2VyUmVwb3MsIHVzZXJTdGFycmVkUmVwb3NdKVxyXG5cclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCkge1xyXG4gICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdyb290Jz5cclxuICAgICAgICAgICAgICAgIDxwPuaCqOi/mOayoeacieeZu+W9lTwvcD5cclxuICAgICAgICAgICAgICAgIDxCdXR0b24gdHlwZT1cInByaW1hcnlcIiBocmVmPXtwdWJsaWNSdW50aW1lQ29uZmlnLk9BVVRIX1VSTH0+XHJcbiAgICAgICAgICAgICAgICAgICAg54K55Ye755m75b2VXHJcbiAgICAgICAgICAgICAgICA8L0J1dHRvbj5cclxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgICAgICAucm9vdCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNDAwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgIClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gKFxyXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPVwicm9vdFwiPlxyXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInVzZXItaW5mb1wiPlxyXG4gICAgICAgICAgICAgICAgPGltZyBzcmM9e3VzZXIuYXZhdGFyX3VybH0gYWx0PVwidXNlciBhdmF0YXJcIiBjbGFzc05hbWU9XCJhdmF0YXJcIiAvPlxyXG4gICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwibG9naW5cIj57dXNlci5sb2dpbn08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJuYW1lXCI+e3VzZXIubmFtZX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9XCJiaW9cIj57dXNlci5iaW99PC9zcGFuPlxyXG4gICAgICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwiZW1haWxcIj5cclxuICAgICAgICAgICAgICAgICAgICA8SWNvbiB0eXBlPVwibWFpbFwiIHN0eWxlPXt7IG1hcmdpblJpZ2h0OiAxMCB9fSAvPlxyXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9e2BtYWlsdG86JHt1c2VyLmVtYWlsfWB9Pnt1c2VyLmVtYWlsfTwvYT5cclxuICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwidXNlci1yZXBvc1wiPlxyXG4gICAgICAgICAgICAgICAgPFRhYnMgYWN0aXZlS2V5PXt0YWJLZXl9IG9uQ2hhbmdlPXtoYW5kbGVUYWJDaGFuZ2V9IGFuaW1hdGVkPXtmYWxzZX0+XHJcbiAgICAgICAgICAgICAgICAgICAgPFRhYnMuVGFiUGFuZSB0YWI9XCLkvaDnmoTku5PlupNcIiBrZXk9XCIxXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHt1c2VyUmVwb3MubWFwKHJlcG8gPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgICAgICA8VGFicy5UYWJQYW5lIHRhYj1cIuS9oOWFs+azqOeahOS7k+W6k1wiIGtleT1cIjJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAge3VzZXJTdGFycmVkUmVwb3MubWFwKHJlcG8gPT4gKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPFJlcG8ga2V5PXtyZXBvLmlkfSByZXBvPXtyZXBvfSAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICApKX1cclxuICAgICAgICAgICAgICAgICAgICA8L1RhYnMuVGFiUGFuZT5cclxuICAgICAgICAgICAgICAgIDwvVGFicz5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIDxzdHlsZSBqc3g+e2BcclxuICAgICAgICAgICAgICAgIC5yb290IHtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDIwcHggMDtcclxuICAgICAgICAgICAgICAgIH0gICAgXHJcbiAgICAgICAgICAgICAgICAudXNlci1pbmZvIHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjAwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0MHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGZsZXgtc2hyaW5rOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5sb2dpbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDgwMDtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC5uYW1lIHtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE2cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM3Nzc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAuYmlvIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjMzMzO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLmF2YXRhciB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4OyAgXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAudXNlci1yZXBvcyB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmxleC1ncm93OiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBgfTwvc3R5bGU+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICApXHJcbn1cclxuXHJcbkluZGV4LmdldEluaXRpYWxQcm9wcyA9IGFzeW5jICh7IGN0eCwgcmVkdXhTdG9yZSB9KSA9PiB7XHJcbiAgICBjb25zdCB1c2VyID0gcmVkdXhTdG9yZS5nZXRTdGF0ZSgpLnVzZXJcclxuICAgIGlmICghdXNlciB8fCAhdXNlci5pZCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlzTG9naW46IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghaXNTZXJ2ZXIpIHtcclxuICAgICAgICBpZiAoY2FjaGUuZ2V0KCd1c2VyUmVwb3MnKSAmJiBjYWNoZS5nZXQoJ3VzZXJTdGFycmVkUmVwb3MnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdXNlclJlcG9zOiBjYWNoZS5nZXQoJ3VzZXJSZXBvcycpLFxyXG4gICAgICAgICAgICAgICAgdXNlclN0YXJyZWRSZXBvczogY2FjaGUuZ2V0KCd1c2VyU3RhcnJlZFJlcG9zJyksXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6I635Y+W5LuT5bqTXHJcbiAgICBjb25zdCB1c2VyUmVwb3MgPSBhd2FpdCBhcGkucmVxdWVzdCh7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvcmVwb3MnXHJcbiAgICB9LCBjdHgucmVxLCBjdHgucmVzKVxyXG5cclxuICAgIC8vIOiOt+WPluiupOivgeeUqOaIt1N0YXLnmoTku5PlupNcclxuICAgIGNvbnN0IHVzZXJTdGFycmVkUmVwb3MgPSBhd2FpdCBhcGkucmVxdWVzdCh7XHJcbiAgICAgICAgdXJsOiAnL3VzZXIvc3RhcnJlZCdcclxuICAgIH0sIGN0eC5yZXEsIGN0eC5yZXMpXHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBpc0xvZ2luOiB0cnVlLFxyXG4gICAgICAgIHVzZXJSZXBvczogdXNlclJlcG9zLmRhdGEsXHJcbiAgICAgICAgdXNlclN0YXJyZWRSZXBvczogdXNlclN0YXJyZWRSZXBvcy5kYXRhXHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IHdpdGhSb3V0ZXIoY29ubmVjdChmdW5jdGlvbiBtYXBTdGF0ZVRvUHJvcHMoc3RhdGUpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdXNlcjogc3RhdGUudXNlcixcclxuICAgIH1cclxufSkoSW5kZXgpKSJdfQ== */\\n/*@ sourceURL=D:\\\\\\\\Project\\\\\\\\interview\\\\\\\\blog\\\\\\\\pages\\\\\\\\index.js */\"));\n}\n\nIndex.getInitialProps = function _callee(_ref2) {\n  var ctx, reduxStore, user, userRepos, userStarredRepos;\n  return _regeneratorRuntime.async(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          ctx = _ref2.ctx, reduxStore = _ref2.reduxStore;\n          user = reduxStore.getState().user;\n\n          if (!(!user || !user.id)) {\n            _context.next = 4;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            isLogin: false\n          });\n\n        case 4:\n          if (isServer) {\n            _context.next = 7;\n            break;\n          }\n\n          if (!(cache.get('userRepos') && cache.get('userStarredRepos'))) {\n            _context.next = 7;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            userRepos: cache.get('userRepos'),\n            userStarredRepos: cache.get('userStarredRepos')\n          });\n\n        case 7:\n          _context.next = 9;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/repos'\n          }, ctx.req, ctx.res));\n\n        case 9:\n          userRepos = _context.sent;\n          _context.next = 12;\n          return _regeneratorRuntime.awrap(api.request({\n            url: '/user/starred'\n          }, ctx.req, ctx.res));\n\n        case 12:\n          userStarredRepos = _context.sent;\n          return _context.abrupt(\"return\", {\n            isLogin: true,\n            userRepos: userRepos.data,\n            userStarredRepos: userStarredRepos.data\n          });\n\n        case 14:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  });\n};\n\nexport default withRouter(connect(function mapStateToProps(state) {\n  return {\n    user: state.user\n  };\n})(Index));","map":{"version":3,"sources":["D:/Project/interview/blog/pages/index.js"],"names":["useEffect","getConfig","connect","Router","withRouter","LRU","Repo","cache","maxAge","api","require","publicRuntimeConfig","cachedUserRepos","cachedUserStarredRepos","isServer","Index","userRepos","userStarredRepos","user","router","tabKey","query","key","handleTabChange","activeKey","push","set","id","OAUTH_URL","avatar_url","login","name","bio","marginRight","email","map","repo","getInitialProps","ctx","reduxStore","getState","isLogin","get","request","url","req","res","data","mapStateToProps","state"],"mappings":"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","sourcesContent":["import { useEffect } from 'react'\r\nimport { Button, Icon, Tabs } from 'antd'\r\nimport getConfig from 'next/config'\r\nimport { connect } from 'react-redux'\r\nimport Router, { withRouter } from 'next/router'\r\nimport LRU  from 'lru-cache'\r\n\r\nimport Repo from '../components/Repo'\r\n\r\nconst cache = new LRU({\r\n    maxAge: 1000 * 60 * 10\r\n})\r\n\r\nconst api = require('../lib/api')\r\n\r\nconst { publicRuntimeConfig } = getConfig()\r\n\r\nlet cachedUserRepos, cachedUserStarredRepos\r\n\r\nconst isServer = typeof window === 'undefined'\r\n\r\nfunction Index ({ userRepos, userStarredRepos, user, router}) {\r\n    // console.log(userRepos, userStarredRepos)\r\n\r\n    const tabKey = router.query.key || '1' \r\n\r\n    const handleTabChange = (activeKey) => {\r\n        Router.push(`/?key=${activeKey}`)\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (!isServer) {    \r\n            // cachedUserRepos = userRepos.data\r\n            // cachedUserStarredRepos = userStarredRepos.data\r\n            if (userRepos) {\r\n                \r\n            }\r\n            cache.set('userRepos', userRepos)\r\n            cache.set('userStarredRepos', userStarredRepos)\r\n        }\r\n    }, [userRepos, userStarredRepos])\r\n\r\n    if (!user || !user.id) {\r\n        return (\r\n            <div className='root'>\r\n                <p>您还没有登录</p>\r\n                <Button type=\"primary\" href={publicRuntimeConfig.OAUTH_URL}>\r\n                    点击登录\r\n                </Button>\r\n                <style jsx>{`\r\n                    .root {\r\n                        height: 400px;\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        justify-content: center;\r\n                        align-items: center;\r\n                    }    \r\n                `}</style>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <div className=\"root\">\r\n            <div className=\"user-info\">\r\n                <img src={user.avatar_url} alt=\"user avatar\" className=\"avatar\" />\r\n                <span className=\"login\">{user.login}</span>\r\n                <span className=\"name\">{user.name}</span>\r\n                <span className=\"bio\">{user.bio}</span>\r\n                <p className=\"email\">\r\n                    <Icon type=\"mail\" style={{ marginRight: 10 }} />\r\n                    <a href={`mailto:${user.email}`}>{user.email}</a>\r\n                </p>\r\n            </div>\r\n            <div className=\"user-repos\">\r\n                <Tabs activeKey={tabKey} onChange={handleTabChange} animated={false}>\r\n                    <Tabs.TabPane tab=\"你的仓库\" key=\"1\">\r\n                        {userRepos.map(repo => (\r\n                            <Repo key={repo.id} repo={repo} />\r\n                        ))}\r\n                    </Tabs.TabPane>\r\n                    <Tabs.TabPane tab=\"你关注的仓库\" key=\"2\">\r\n                        {userStarredRepos.map(repo => (\r\n                            <Repo key={repo.id} repo={repo} />\r\n                        ))}\r\n                    </Tabs.TabPane>\r\n                </Tabs>\r\n            </div>\r\n            <style jsx>{`\r\n                .root {\r\n                    display: flex;\r\n                    align-items: flex-start;\r\n                    padding: 20px 0;\r\n                }    \r\n                .user-info {\r\n                    width: 200px;\r\n                    margin-right: 40px;\r\n                    flex-shrink: 0;\r\n                    display: flex;\r\n                    flex-direction: column;\r\n                }\r\n                .login {\r\n                    font-weight: 800;\r\n                    font-size: 20px;\r\n                    margin-top: 20px;\r\n                }\r\n                .name {\r\n                    font-size: 16px;\r\n                    color: #777;\r\n                }\r\n                .bio {\r\n                    margin-top: 20px;\r\n                    color: #333;\r\n                }\r\n                .avatar {\r\n                    width: 100%;\r\n                    border-radius: 5px;  \r\n                }\r\n                .user-repos {\r\n                    flex-grow: 1;\r\n                }\r\n            `}</style>\r\n        </div>\r\n    )\r\n}\r\n\r\nIndex.getInitialProps = async ({ ctx, reduxStore }) => {\r\n    const user = reduxStore.getState().user\r\n    if (!user || !user.id) {\r\n        return {\r\n            isLogin: false\r\n        }\r\n    }\r\n\r\n    if (!isServer) {\r\n        if (cache.get('userRepos') && cache.get('userStarredRepos')) {\r\n            return {\r\n                userRepos: cache.get('userRepos'),\r\n                userStarredRepos: cache.get('userStarredRepos'),\r\n            }\r\n        }\r\n    }\r\n\r\n    // 获取仓库\r\n    const userRepos = await api.request({\r\n        url: '/user/repos'\r\n    }, ctx.req, ctx.res)\r\n\r\n    // 获取认证用户Star的仓库\r\n    const userStarredRepos = await api.request({\r\n        url: '/user/starred'\r\n    }, ctx.req, ctx.res)\r\n\r\n    return {\r\n        isLogin: true,\r\n        userRepos: userRepos.data,\r\n        userStarredRepos: userStarredRepos.data\r\n    }\r\n}\r\n\r\nexport default withRouter(connect(function mapStateToProps(state) {\r\n    return {\r\n        user: state.user,\r\n    }\r\n})(Index))"]},"metadata":{},"sourceType":"module"}